export const metadata = {
  title: 'string.dump()',
  description: 'The `string.dump()` function returns a binary representation of a Lua function, useful for serialization or debugging.',
};

# string.dump()

The `string.dump()` function generates a binary string representing a precompiled version of a Lua function. This is useful for serializing or transmitting Lua functions, as well as for debugging purposes. 

## Syntax

```lua
string.dump(function, stripDebug)
```

## Parameters

<Properties>
  <Property name="function" type="function">
    The Lua function to be dumped into a binary representation.
  </Property>
  <Property name="stripDebug" type="boolean" optional="true">
    If set to `true`, debug information (like line numbers) will be stripped from the dumped string, resulting in a smaller binary size.
  </Property>
</Properties>

## Return Value
The function returns:
- A binary string containing the precompiled representation of the Lua function.

## Examples

### Example 1: Dump a simple function
The function is dumped into its binary representation.

<CodeGroup title="Example 1">
```lua
local function greet()
  return "Hello, world!"
end

local dumped = string.dump(greet)
print(dumped)

-- Output: A binary string representing the compiled function
```
</CodeGroup>

### Example 2: Serialize and reuse a function
Dump a function, save it to a file, and load it later.

<CodeGroup title="Example 2">
```lua
local function square(x)
  return x * x
end

-- Serialize the function to a file
local dumped = string.dump(square)
local file = io.open("square_function.bin", "wb")
file:write(dumped)
file:close()

-- Later, load the function back
local file = io.open("square_function.bin", "rb")
local binary = file:read("*a")
file:close()

local loadedFunction = load(binary)
print(loadedFunction(5)) -- Output: 25
```
</CodeGroup>

### Example 3: Strip debug information
Use the `stripDebug` parameter to create a more compact binary representation.

<CodeGroup title="Example 3">
```lua
local function sum(a, b)
  return a + b
end

local dumped = string.dump(sum, true) -- Strips debug information
print(dumped)

-- Output: A smaller binary string
```
</CodeGroup>

### Example 4: Error handling
`string.dump()` only works with Lua functions. Attempting to dump a non-function value will raise an error.

<CodeGroup title="Example 4">
```lua
-- print(string.dump("not a function"))
-- Error: bad argument #1 to 'dump' (function expected, got string)
```
</CodeGroup>

## Use Cases
- **Serialization**: Save functions for reuse or transmission.
- **Debugging**: Analyze or compare the internal representation of Lua functions.
- **Optimization**: Strip debug information to reduce binary size for production use.

## See also
- **`load()`**: Reconstructs a function from a binary string generated by `string.dump()`.
- **`loadstring()`**: Similar to `load()`, but used for loading Lua code from strings (deprecated in Lua 5.2+).
- **`io.open()`**: Useful for saving or loading dumped functions from files.
